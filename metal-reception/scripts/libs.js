!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.d(t,"a",(function(){return l}));var s,r,a,l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.config=i({backscroll:!0,linkAttributeName:"data-hystmodal",closeOnOverlay:!0,closeOnEsc:!0,closeOnButton:!0,waitTransitions:!1,catchFocus:!0,fixedSelectors:"*[data-hystfixed]",beforeOpen:function(){},afterClose:function(){}},t),this.config.linkAttributeName&&this.init(),this._closeAfterTransition=this._closeAfterTransition.bind(this)}var t,n,s;return t=e,(n=[{key:"init",value:function(){this.isOpened=!1,this.openedWindow=!1,this.starter=!1,this._nextWindows=!1,this._scrollPosition=0,this._reopenTrigger=!1,this._overlayChecker=!1,this._isMoved=!1,this._focusElements=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],this._modalBlock=!1,e._shadow||(e._shadow=document.createElement("button"),e._shadow.classList.add("hystmodal__shadow"),document.body.appendChild(e._shadow)),this.eventsFeeler()}},{key:"eventsFeeler",value:function(){document.addEventListener("click",function(e){var t=e.target.closest("["+this.config.linkAttributeName+"]");if(!this._isMoved&&t){e.preventDefault(),this.starter=t;var n=this.starter.getAttribute(this.config.linkAttributeName);return this._nextWindows=document.querySelector(n),void this.open()}this.config.closeOnButton&&e.target.closest("[data-hystclose]")&&this.close()}.bind(this)),this.config.closeOnOverlay&&(document.addEventListener("mousedown",function(e){!this._isMoved&&e.target instanceof Element&&!e.target.classList.contains("hystmodal__wrap")||(this._overlayChecker=!0)}.bind(this)),document.addEventListener("mouseup",function(e){if(!this._isMoved&&e.target instanceof Element&&this._overlayChecker&&e.target.classList.contains("hystmodal__wrap"))return e.preventDefault(),this._overlayChecker,void this.close();this._overlayChecker=!1}.bind(this))),window.addEventListener("keydown",function(e){if(!this._isMoved&&this.config.closeOnEsc&&27==e.which&&this.isOpened)return e.preventDefault(),void this.close();!this._isMoved&&this.config.catchFocus&&9==e.which&&this.isOpened&&this.focusCatcher(e)}.bind(this))}},{key:"open",value:function(t){if(t&&(this._nextWindows="string"==typeof t?document.querySelector(t):t),this._nextWindows){if(this.isOpened)return this._reopenTrigger=!0,void this.close();this.openedWindow=this._nextWindows,this._modalBlock=this.openedWindow.querySelector(".hystmodal__window"),this.config.beforeOpen(this),this._bodyScrollControl(),e._shadow.classList.add("hystmodal__shadow--show"),this.openedWindow.classList.add("hystmodal--active"),this.openedWindow.setAttribute("aria-hidden","false"),this.config.catchFocus&&this.focusContol(),this.isOpened=!0}else console.log("Warinig: hustModal selector is not found")}},{key:"close",value:function(){this.isOpened&&(this.config.waitTransitions?(this.openedWindow.classList.add("hystmodal--moved"),this._isMoved=!0,this.openedWindow.addEventListener("transitionend",this._closeAfterTransition),this.openedWindow.classList.remove("hystmodal--active")):(this.openedWindow.classList.remove("hystmodal--active"),this._closeAfterTransition()))}},{key:"_closeAfterTransition",value:function(){this.openedWindow.classList.remove("hystmodal--moved"),this.openedWindow.removeEventListener("transitionend",this._closeAfterTransition),this._isMoved=!1,e._shadow.classList.remove("hystmodal__shadow--show"),this.openedWindow.setAttribute("aria-hidden","true"),this.config.catchFocus&&this.focusContol(),this._bodyScrollControl(),this.isOpened=!1,this.openedWindow.scrollTop=0,this.config.afterClose(this),this._reopenTrigger&&(this._reopenTrigger=!1,this.open())}},{key:"focusContol",value:function(){var e=this.openedWindow.querySelectorAll(this._focusElements);this.isOpened&&this.starter?this.starter.focus():e.length&&e[0].focus()}},{key:"focusCatcher",value:function(e){var t=this.openedWindow.querySelectorAll(this._focusElements),n=Array.prototype.slice.call(t);if(this.openedWindow.contains(document.activeElement)){var i=n.indexOf(document.activeElement);console.log(i),e.shiftKey&&0===i&&(n[n.length-1].focus(),e.preventDefault()),e.shiftKey||i!==n.length-1||(n[0].focus(),e.preventDefault())}else n[0].focus(),e.preventDefault()}},{key:"_bodyScrollControl",value:function(){if(this.config.backscroll){var e=Array.prototype.slice.call(document.querySelectorAll(this.config.fixedSelectors)),t=document.documentElement;if(!0===this.isOpened)return t.classList.remove("hystmodal__opened"),t.style.marginRight="",e.map((function(e){e.style.marginRight=""})),window.scrollTo(0,this._scrollPosition),void(t.style.top="");this._scrollPosition=window.pageYOffset;var n=window.innerWidth-t.clientWidth;t.style.top=-this._scrollPosition+"px",n&&(t.style.marginRight=n+"px",e.map((function(e){e.style.marginRight=parseInt(getComputedStyle(e).marginRight)+n+"px"}))),t.classList.add("hystmodal__opened")}}}])&&o(t.prototype,n),s&&o(t,s),e}();a=!1,(r="_shadow")in(s=l)?Object.defineProperty(s,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[r]=a},function(e,t,n){"use strict";n.r(t),function(e){var t=n(0);n(3),n(4);e.HystModal=t.a}.call(this,n(2))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null})},function(e,t,n){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh5c3Rtb2RhbC5taW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoibGlicy5qcyIsInNvdXJjZXNDb250ZW50IjpbIiFmdW5jdGlvbihlKXt2YXIgdD17fTtmdW5jdGlvbiBuKGkpe2lmKHRbaV0pcmV0dXJuIHRbaV0uZXhwb3J0czt2YXIgbz10W2ldPXtpOmksbDohMSxleHBvcnRzOnt9fTtyZXR1cm4gZVtpXS5jYWxsKG8uZXhwb3J0cyxvLG8uZXhwb3J0cyxuKSxvLmw9ITAsby5leHBvcnRzfW4ubT1lLG4uYz10LG4uZD1mdW5jdGlvbihlLHQsaSl7bi5vKGUsdCl8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQse2VudW1lcmFibGU6ITAsZ2V0Oml9KX0sbi5yPWZ1bmN0aW9uKGUpe1widW5kZWZpbmVkXCIhPXR5cGVvZiBTeW1ib2wmJlN5bWJvbC50b1N0cmluZ1RhZyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZTpcIk1vZHVsZVwifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSl9LG4udD1mdW5jdGlvbihlLHQpe2lmKDEmdCYmKGU9bihlKSksOCZ0KXJldHVybiBlO2lmKDQmdCYmXCJvYmplY3RcIj09dHlwZW9mIGUmJmUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgaT1PYmplY3QuY3JlYXRlKG51bGwpO2lmKG4ucihpKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaSxcImRlZmF1bHRcIix7ZW51bWVyYWJsZTohMCx2YWx1ZTplfSksMiZ0JiZcInN0cmluZ1wiIT10eXBlb2YgZSlmb3IodmFyIG8gaW4gZSluLmQoaSxvLGZ1bmN0aW9uKHQpe3JldHVybiBlW3RdfS5iaW5kKG51bGwsbykpO3JldHVybiBpfSxuLm49ZnVuY3Rpb24oZSl7dmFyIHQ9ZSYmZS5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIGUuZGVmYXVsdH06ZnVuY3Rpb24oKXtyZXR1cm4gZX07cmV0dXJuIG4uZCh0LFwiYVwiLHQpLHR9LG4ubz1mdW5jdGlvbihlLHQpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KX0sbi5wPVwiXCIsbihuLnM9MSl9KFtmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSgpe3JldHVybihpPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe3ZhciBuPWFyZ3VtZW50c1t0XTtmb3IodmFyIGkgaW4gbilPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobixpKSYmKGVbaV09bltpXSl9cmV0dXJuIGV9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gbyhlLHQpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgaT10W25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxpLmtleSxpKX19bi5kKHQsXCJhXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGx9KSk7dmFyIHMscixhLGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpeyFmdW5jdGlvbihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9KHRoaXMsZSk7dGhpcy5jb25maWc9aSh7YmFja3Njcm9sbDohMCxsaW5rQXR0cmlidXRlTmFtZTpcImRhdGEtaHlzdG1vZGFsXCIsY2xvc2VPbk92ZXJsYXk6ITAsY2xvc2VPbkVzYzohMCxjbG9zZU9uQnV0dG9uOiEwLHdhaXRUcmFuc2l0aW9uczohMSxjYXRjaEZvY3VzOiEwLGZpeGVkU2VsZWN0b3JzOlwiKltkYXRhLWh5c3RmaXhlZF1cIixiZWZvcmVPcGVuOmZ1bmN0aW9uKCl7fSxhZnRlckNsb3NlOmZ1bmN0aW9uKCl7fX0sdCksdGhpcy5jb25maWcubGlua0F0dHJpYnV0ZU5hbWUmJnRoaXMuaW5pdCgpLHRoaXMuX2Nsb3NlQWZ0ZXJUcmFuc2l0aW9uPXRoaXMuX2Nsb3NlQWZ0ZXJUcmFuc2l0aW9uLmJpbmQodGhpcyl9dmFyIHQsbixzO3JldHVybiB0PWUsKG49W3trZXk6XCJpbml0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmlzT3BlbmVkPSExLHRoaXMub3BlbmVkV2luZG93PSExLHRoaXMuc3RhcnRlcj0hMSx0aGlzLl9uZXh0V2luZG93cz0hMSx0aGlzLl9zY3JvbGxQb3NpdGlvbj0wLHRoaXMuX3Jlb3BlblRyaWdnZXI9ITEsdGhpcy5fb3ZlcmxheUNoZWNrZXI9ITEsdGhpcy5faXNNb3ZlZD0hMSx0aGlzLl9mb2N1c0VsZW1lbnRzPVtcImFbaHJlZl1cIixcImFyZWFbaHJlZl1cIiwnaW5wdXQ6bm90KFtkaXNhYmxlZF0pOm5vdChbdHlwZT1cImhpZGRlblwiXSk6bm90KFthcmlhLWhpZGRlbl0pJyxcInNlbGVjdDpub3QoW2Rpc2FibGVkXSk6bm90KFthcmlhLWhpZGRlbl0pXCIsXCJ0ZXh0YXJlYTpub3QoW2Rpc2FibGVkXSk6bm90KFthcmlhLWhpZGRlbl0pXCIsXCJidXR0b246bm90KFtkaXNhYmxlZF0pOm5vdChbYXJpYS1oaWRkZW5dKVwiLFwiaWZyYW1lXCIsXCJvYmplY3RcIixcImVtYmVkXCIsXCJbY29udGVudGVkaXRhYmxlXVwiLCdbdGFiaW5kZXhdOm5vdChbdGFiaW5kZXhePVwiLVwiXSknXSx0aGlzLl9tb2RhbEJsb2NrPSExLGUuX3NoYWRvd3x8KGUuX3NoYWRvdz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpLGUuX3NoYWRvdy5jbGFzc0xpc3QuYWRkKFwiaHlzdG1vZGFsX19zaGFkb3dcIiksZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlLl9zaGFkb3cpKSx0aGlzLmV2ZW50c0ZlZWxlcigpfX0se2tleTpcImV2ZW50c0ZlZWxlclwiLHZhbHVlOmZ1bmN0aW9uKCl7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsZnVuY3Rpb24oZSl7dmFyIHQ9ZS50YXJnZXQuY2xvc2VzdChcIltcIit0aGlzLmNvbmZpZy5saW5rQXR0cmlidXRlTmFtZStcIl1cIik7aWYoIXRoaXMuX2lzTW92ZWQmJnQpe2UucHJldmVudERlZmF1bHQoKSx0aGlzLnN0YXJ0ZXI9dDt2YXIgbj10aGlzLnN0YXJ0ZXIuZ2V0QXR0cmlidXRlKHRoaXMuY29uZmlnLmxpbmtBdHRyaWJ1dGVOYW1lKTtyZXR1cm4gdGhpcy5fbmV4dFdpbmRvd3M9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuKSx2b2lkIHRoaXMub3BlbigpfXRoaXMuY29uZmlnLmNsb3NlT25CdXR0b24mJmUudGFyZ2V0LmNsb3Nlc3QoXCJbZGF0YS1oeXN0Y2xvc2VdXCIpJiZ0aGlzLmNsb3NlKCl9LmJpbmQodGhpcykpLHRoaXMuY29uZmlnLmNsb3NlT25PdmVybGF5JiYoZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLGZ1bmN0aW9uKGUpeyF0aGlzLl9pc01vdmVkJiZlLnRhcmdldCBpbnN0YW5jZW9mIEVsZW1lbnQmJiFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJoeXN0bW9kYWxfX3dyYXBcIil8fCh0aGlzLl9vdmVybGF5Q2hlY2tlcj0hMCl9LmJpbmQodGhpcykpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsZnVuY3Rpb24oZSl7aWYoIXRoaXMuX2lzTW92ZWQmJmUudGFyZ2V0IGluc3RhbmNlb2YgRWxlbWVudCYmdGhpcy5fb3ZlcmxheUNoZWNrZXImJmUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImh5c3Rtb2RhbF9fd3JhcFwiKSlyZXR1cm4gZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuX292ZXJsYXlDaGVja2VyLHZvaWQgdGhpcy5jbG9zZSgpO3RoaXMuX292ZXJsYXlDaGVja2VyPSExfS5iaW5kKHRoaXMpKSksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsZnVuY3Rpb24oZSl7aWYoIXRoaXMuX2lzTW92ZWQmJnRoaXMuY29uZmlnLmNsb3NlT25Fc2MmJjI3PT1lLndoaWNoJiZ0aGlzLmlzT3BlbmVkKXJldHVybiBlLnByZXZlbnREZWZhdWx0KCksdm9pZCB0aGlzLmNsb3NlKCk7IXRoaXMuX2lzTW92ZWQmJnRoaXMuY29uZmlnLmNhdGNoRm9jdXMmJjk9PWUud2hpY2gmJnRoaXMuaXNPcGVuZWQmJnRoaXMuZm9jdXNDYXRjaGVyKGUpfS5iaW5kKHRoaXMpKX19LHtrZXk6XCJvcGVuXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYodCYmKHRoaXMuX25leHRXaW5kb3dzPVwic3RyaW5nXCI9PXR5cGVvZiB0P2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodCk6dCksdGhpcy5fbmV4dFdpbmRvd3Mpe2lmKHRoaXMuaXNPcGVuZWQpcmV0dXJuIHRoaXMuX3Jlb3BlblRyaWdnZXI9ITAsdm9pZCB0aGlzLmNsb3NlKCk7dGhpcy5vcGVuZWRXaW5kb3c9dGhpcy5fbmV4dFdpbmRvd3MsdGhpcy5fbW9kYWxCbG9jaz10aGlzLm9wZW5lZFdpbmRvdy5xdWVyeVNlbGVjdG9yKFwiLmh5c3Rtb2RhbF9fd2luZG93XCIpLHRoaXMuY29uZmlnLmJlZm9yZU9wZW4odGhpcyksdGhpcy5fYm9keVNjcm9sbENvbnRyb2woKSxlLl9zaGFkb3cuY2xhc3NMaXN0LmFkZChcImh5c3Rtb2RhbF9fc2hhZG93LS1zaG93XCIpLHRoaXMub3BlbmVkV2luZG93LmNsYXNzTGlzdC5hZGQoXCJoeXN0bW9kYWwtLWFjdGl2ZVwiKSx0aGlzLm9wZW5lZFdpbmRvdy5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiLFwiZmFsc2VcIiksdGhpcy5jb25maWcuY2F0Y2hGb2N1cyYmdGhpcy5mb2N1c0NvbnRvbCgpLHRoaXMuaXNPcGVuZWQ9ITB9ZWxzZSBjb25zb2xlLmxvZyhcIldhcmluaWc6IGh1c3RNb2RhbCBzZWxlY3RvciBpcyBub3QgZm91bmRcIil9fSx7a2V5OlwiY2xvc2VcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuaXNPcGVuZWQmJih0aGlzLmNvbmZpZy53YWl0VHJhbnNpdGlvbnM/KHRoaXMub3BlbmVkV2luZG93LmNsYXNzTGlzdC5hZGQoXCJoeXN0bW9kYWwtLW1vdmVkXCIpLHRoaXMuX2lzTW92ZWQ9ITAsdGhpcy5vcGVuZWRXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25lbmRcIix0aGlzLl9jbG9zZUFmdGVyVHJhbnNpdGlvbiksdGhpcy5vcGVuZWRXaW5kb3cuY2xhc3NMaXN0LnJlbW92ZShcImh5c3Rtb2RhbC0tYWN0aXZlXCIpKToodGhpcy5vcGVuZWRXaW5kb3cuY2xhc3NMaXN0LnJlbW92ZShcImh5c3Rtb2RhbC0tYWN0aXZlXCIpLHRoaXMuX2Nsb3NlQWZ0ZXJUcmFuc2l0aW9uKCkpKX19LHtrZXk6XCJfY2xvc2VBZnRlclRyYW5zaXRpb25cIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMub3BlbmVkV2luZG93LmNsYXNzTGlzdC5yZW1vdmUoXCJoeXN0bW9kYWwtLW1vdmVkXCIpLHRoaXMub3BlbmVkV2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsdGhpcy5fY2xvc2VBZnRlclRyYW5zaXRpb24pLHRoaXMuX2lzTW92ZWQ9ITEsZS5fc2hhZG93LmNsYXNzTGlzdC5yZW1vdmUoXCJoeXN0bW9kYWxfX3NoYWRvdy0tc2hvd1wiKSx0aGlzLm9wZW5lZFdpbmRvdy5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiLFwidHJ1ZVwiKSx0aGlzLmNvbmZpZy5jYXRjaEZvY3VzJiZ0aGlzLmZvY3VzQ29udG9sKCksdGhpcy5fYm9keVNjcm9sbENvbnRyb2woKSx0aGlzLmlzT3BlbmVkPSExLHRoaXMub3BlbmVkV2luZG93LnNjcm9sbFRvcD0wLHRoaXMuY29uZmlnLmFmdGVyQ2xvc2UodGhpcyksdGhpcy5fcmVvcGVuVHJpZ2dlciYmKHRoaXMuX3Jlb3BlblRyaWdnZXI9ITEsdGhpcy5vcGVuKCkpfX0se2tleTpcImZvY3VzQ29udG9sXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wZW5lZFdpbmRvdy5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2ZvY3VzRWxlbWVudHMpO3RoaXMuaXNPcGVuZWQmJnRoaXMuc3RhcnRlcj90aGlzLnN0YXJ0ZXIuZm9jdXMoKTplLmxlbmd0aCYmZVswXS5mb2N1cygpfX0se2tleTpcImZvY3VzQ2F0Y2hlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMub3BlbmVkV2luZG93LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fZm9jdXNFbGVtZW50cyksbj1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0KTtpZih0aGlzLm9wZW5lZFdpbmRvdy5jb250YWlucyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KSl7dmFyIGk9bi5pbmRleE9mKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpO2NvbnNvbGUubG9nKGkpLGUuc2hpZnRLZXkmJjA9PT1pJiYobltuLmxlbmd0aC0xXS5mb2N1cygpLGUucHJldmVudERlZmF1bHQoKSksZS5zaGlmdEtleXx8aSE9PW4ubGVuZ3RoLTF8fChuWzBdLmZvY3VzKCksZS5wcmV2ZW50RGVmYXVsdCgpKX1lbHNlIG5bMF0uZm9jdXMoKSxlLnByZXZlbnREZWZhdWx0KCl9fSx7a2V5OlwiX2JvZHlTY3JvbGxDb250cm9sXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZih0aGlzLmNvbmZpZy5iYWNrc2Nyb2xsKXt2YXIgZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuY29uZmlnLmZpeGVkU2VsZWN0b3JzKSksdD1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7aWYoITA9PT10aGlzLmlzT3BlbmVkKXJldHVybiB0LmNsYXNzTGlzdC5yZW1vdmUoXCJoeXN0bW9kYWxfX29wZW5lZFwiKSx0LnN0eWxlLm1hcmdpblJpZ2h0PVwiXCIsZS5tYXAoKGZ1bmN0aW9uKGUpe2Uuc3R5bGUubWFyZ2luUmlnaHQ9XCJcIn0pKSx3aW5kb3cuc2Nyb2xsVG8oMCx0aGlzLl9zY3JvbGxQb3NpdGlvbiksdm9pZCh0LnN0eWxlLnRvcD1cIlwiKTt0aGlzLl9zY3JvbGxQb3NpdGlvbj13aW5kb3cucGFnZVlPZmZzZXQ7dmFyIG49d2luZG93LmlubmVyV2lkdGgtdC5jbGllbnRXaWR0aDt0LnN0eWxlLnRvcD0tdGhpcy5fc2Nyb2xsUG9zaXRpb24rXCJweFwiLG4mJih0LnN0eWxlLm1hcmdpblJpZ2h0PW4rXCJweFwiLGUubWFwKChmdW5jdGlvbihlKXtlLnN0eWxlLm1hcmdpblJpZ2h0PXBhcnNlSW50KGdldENvbXB1dGVkU3R5bGUoZSkubWFyZ2luUmlnaHQpK24rXCJweFwifSkpKSx0LmNsYXNzTGlzdC5hZGQoXCJoeXN0bW9kYWxfX29wZW5lZFwiKX19fV0pJiZvKHQucHJvdG90eXBlLG4pLHMmJm8odCxzKSxlfSgpO2E9ITEsKHI9XCJfc2hhZG93XCIpaW4ocz1sKT9PYmplY3QuZGVmaW5lUHJvcGVydHkocyxyLHt2YWx1ZTphLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSk6c1tyXT1hfSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7bi5yKHQpLGZ1bmN0aW9uKGUpe3ZhciB0PW4oMCk7bigzKSxuKDQpO2UuSHlzdE1vZGFsPXQuYX0uY2FsbCh0aGlzLG4oMikpfSxmdW5jdGlvbihlLHQpe3ZhciBuO249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKTt0cnl7bj1ufHxuZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpfWNhdGNoKGUpe1wib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3cmJihuPXdpbmRvdyl9ZS5leHBvcnRzPW59LGZ1bmN0aW9uKGUsdCl7RWxlbWVudC5wcm90b3R5cGUubWF0Y2hlc3x8KEVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXM9RWxlbWVudC5wcm90b3R5cGUubXNNYXRjaGVzU2VsZWN0b3J8fEVsZW1lbnQucHJvdG90eXBlLndlYmtpdE1hdGNoZXNTZWxlY3RvciksRWxlbWVudC5wcm90b3R5cGUuY2xvc2VzdHx8KEVsZW1lbnQucHJvdG90eXBlLmNsb3Nlc3Q9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztkb3tpZih0Lm1hdGNoZXMoZSkpcmV0dXJuIHQ7dD10LnBhcmVudEVsZW1lbnR8fHQucGFyZW50Tm9kZX13aGlsZShudWxsIT09dCYmMT09PXQubm9kZVR5cGUpO3JldHVybiBudWxsfSl9LGZ1bmN0aW9uKGUsdCxuKXt9XSk7Il19